# Contenu et motivation

<!-- paragraph -->

Ce manuel explique comment concevoir et créer des visualisations de données interactives à l'aide du package R `animint2`.

<!-- paragraph -->

## Contenu

<!-- paragraph -->

Les chapitres de ce manuel sont organisés comme suit.

<!-- paragraph -->

### Les chapitres `animint2` extensions de la grammaire graphique {#animint}

<!-- paragraph -->

Les sept premiers chapitres doivent être lus de manière séquentielle, car ils fournissent un guide pas à pas pour la visualisation interactive des données à l'aide de `animint2`.

<!-- paragraph -->

A partir du [section Motivation](#motivation) ci-dessous, ce premier chapitre donne un aperçu de l'analyse et de la visualisation des données.
<!-- comment -->
Il fournit une motivation et une base théorique pour les autres chapitres, et devrait être particulièrement utile aux lecteurs qui sont complètement novices en matière d'analyse de données.
<!-- comment -->
Il présente la méthode de prototypage de visualisation des données à l'aide d'esquisses, sans introduire de code R.

<!-- paragraph -->

En commençant par [chapitre 2](ch02) nous montrerons comment les esquisses de graphiques peuvent être traduites en code R.
<!-- comment -->
Le chapitre 2 explique les bases du tracé à l'aide des logiciels ggplots et `animint2` et devrait être plus utile aux lecteurs qui n'ont jamais utilisé les logiciels `ggplot2`.
<!-- comment -->
Il explique comment les ggplots standards peuvent être affichés sur des pages web en utilisant la commande `animint2`.

<!-- paragraph -->

[Chapitre 3](ch03) introduit `showSelected`, l'un des deux principaux mots-clés qui `animint2` introduit pour la conception de visualisation des données interactives.
<!-- comment -->
Le chapitre 3 commence par expliquer les variables de sélection, qui fournissent le mécanisme d'interaction dans la visualisation de données. `animint2`.
<!-- comment -->
Le chapitre 3 explique ensuite comment le`showSelected` permet de tracer des sous-ensembles de données.
<!-- comment -->
Le chapitre 3 explique également comment utiliser des transitions graduelles et des animations.

<!-- paragraph -->

[Chapitre 4](ch04) introduit `clickSelects` l'autre mot-clé principal que `animint2` introduit pour la conception de visualisation des données interactives.
<!-- comment -->
Les`clickSelects` permet à l'utilisateur de modifier une variable de sélection en cliquant directement sur un élément du graphique.

<!-- paragraph -->

[Chapitre 5](ch05) explique différentes façons de partager vos visualisations de données interactives sur le web.

<!-- paragraph -->

[Chapitre 6](ch06) couvre d'autres caractéristiques de `animint2` y compris la manière de spécifier les hyperliens, les infobulles, les noms de variables de sélecteurs pilotés par les données.

<!-- paragraph -->

[Chapitre 7](ch07) couvre les limites de l'implémenté actuel de la `animint2` et explique des solutions de contournement pour certains problèmes courants.
<!-- comment -->
Il contient également quelques idées d'amélioration, pour ceux qui souhaiteraient contribuer à l'amélioration du paquet R. `animint2`.

<!-- paragraph -->

### Exemples d'application {#examples}

<!-- paragraph -->

Les autres chapitres peuvent être lus dans n'importe quel ordre, puisque chacun d'entre eux explique comment réaliser des visualisations des données pour un ensemble de données ou un algorithme statistique particulier.

<!-- paragraph -->

[Chapitre 8](ch08) explique comment créer une visualisation interactive multi-panneaux des données de la Banque mondiale.

<!-- paragraph -->

[Chapitre 9](ch09) présente une visualisation des données concernant les cyclistes de Montréal.

<!-- paragraph -->

[Chapitre 10](ch10) explique comment créer une refonte interactive de la visualisation des données sur les voisins les plus proches du livre Elements of Statistical Learning. [@Hastie2009] .

<!-- paragraph -->

[Chapitre 11](ch11) présente une visualisation des données qui explique le Lasso, un modèle d'apprentissage automatique pour la régression régularisée.

<!-- paragraph -->

[Chapitre 12](ch12) présente une visualisation des données qui explique les machines à vecteurs de support (SVM), un modèle d'apprentissage automatique pour la classification binaire.

<!-- paragraph -->

[Chapitre 13](ch13) explique comment créer une visualisation interactive qui explique le modèle de régression de Poisson.

<!-- paragraph -->

[Chapitre 14](ch14) montre un exemple de création de sélecteurs pilotés par les données à l'aide de sélecteurs nommés `clickSelects` et `showSelected` dans une visualisation interactive d'un modèle de détection de pics.

<!-- paragraph -->

[Chapitre 15](ch15) explique comment créer une visualisation interactive de l'algorithme de recherche de racines de Newton.

<!-- paragraph -->

[Chapitre 16](ch16) explique comment créer une visualisation interactive d'un modèle de détection optimale des points de changement.

<!-- paragraph -->

[Chapitre 17](ch17) explique comment créer une visualisation interactive de l'algorithme d'agrégation des k-moyennes.

<!-- paragraph -->

[Chapitre 18](ch18) explique comment créer une visualisation interactive de l'algorithme de descente de gradient pour l'apprentissage des matrices de poids des réseaux de neurones.

<!-- paragraph -->

[Chapitre 19](ch19) explique comment visualiser les valeurs P, et notamment comment contourner les surreprésentations, à l'aide d'une carte thermique liée à un diagramme de dispersion zoomé.

<!-- paragraph -->

### Annexes {#appendices}

<!-- paragraph -->

[Expressions utiles](ch99) contient des explications détaillées sur plusieurs expressions idiomatiques du code R qui sont utilisées dans ce manuel.

<!-- paragraph -->

[Le guide de contribution](contribute.html) contient des instructions sur la manière de contribuer à l'amélioration de ce manuel.

<!-- paragraph -->

## Motivation {#motivation}

<!-- paragraph -->

```{r setup, echo=FALSE}
knitr::opts_chunk$set(fig.path="ch01-figures/")
```

<!-- paragraph -->

L'objectif de ce manuel est d'expliquer l'utilisation des éléments suivants `animint2`, un package R pour la visualisation interactive des données.
<!-- comment -->
Ce chapitre d'introduction répond aux questions suivantes :

<!-- paragraph -->

- Que sont les données et comment sont-elles analysées ?
<!-- comment -->
- Qu'est-ce que la visualisation des données, et quand est-elle utile pour l'analyse des données ?
<!-- comment -->
- Qu'est-ce que la visualisation des données interactive et quand est-elle utile ?

<!-- paragraph -->

Ce chapitre introductif suit le plan suivant :

<!-- paragraph -->

- Qu'est-ce qu'une donnée ?
<!-- comment -->
- Petites données -- la visualisation des données n'est pas nécessaire.
<!-- comment -->
- Données moyennes -- la visualisation statique des données est suffisante.
<!-- comment -->
- Grandes données - la visualisation interactive des données est utile.

<!-- paragraph -->

### Qu'est-ce que l'analyse des données ?
<!-- comment -->
{#data}

<!-- paragraph -->

Les données sont des éléments d'information qui sont systématiquement enregistrés, soit sur papier, soit sur un ordinateur.
<!-- comment -->
Tout le monde peut créer des données, simplement en écrivant systématiquement des choses.
<!-- comment -->
En général, les données sont créées pour répondre à une question spécifique et sont organisées en tableaux avec des lignes pour les observations et des colonnes pour les variables ou différents types d'informations.
<!-- comment -->
Le mot "données" vient du latin, sa forme plurielle "datum" fait référence à une observation/rangée d'un tableau de données.
<!-- comment -->
Nous utilisons le terme "ensemble de données" pour désigner un sous-ensemble d'observations/de lignes, ou le tableau de données dans son intégralité.

<!-- paragraph -->

Il existe de nombreux exemples de données qui pourraient être créées pour répondre à des questions basées sur des expériences quotidiennes :

<!-- paragraph -->

- Comment le temps qu'il fait cette année se compare-t-il à celui des années précédentes ?
<!-- comment -->
Y a-t-il eu plus ou moins de pluie que d'habitude ?
<!-- comment -->
Pour répondre à ces questions, nous pourrions créer un tableau de données avec des colonnes pour les mesures des différentes conditions météorologiques : température, précipitations, etc.
<!-- comment -->
Il devrait également y avoir des colonnes pour la date et l'heure de chaque observation, et une ligne pour chaque observation.
<!-- comment -->
- Quel est l'effet de ce nouveau régime sur moi ?
<!-- comment -->
Si vous essayez un nouveau régime, vous pouvez noter ce que vous mangez et comment vous vous sentez après chaque repas.
<!-- comment -->
Dans ce cas, vous pouvez créer un tableau de contingence avec une ligne pour chaque repas et quatre colonnes : la date, l'heure, ce que vous avez mangé et comment vous vous êtes senti après.
<!-- comment -->
- Ce nouveau traitement contre le cancer du poumon est-il plus efficace que l'ancien ?
<!-- comment -->
Le médecin qui mène l'essai clinique répartit au hasard les patients entre le nouveau et l'ancien traitement.
<!-- comment -->
Le médecin créerait ensuite un tableau de données comportant une ligne pour chaque patient et plusieurs colonnes : nombre d'années de tabagisme du patient, type de traitement (nouveau ou ancien), âge du patient au moment du traitement, âge du patient au moment du décès, mesure des marqueurs tumoraux, etc.

<!-- paragraph -->

Nous définissons l'"analyse des données" comme le processus consistant à répondre à ces questions en convertissant le tableau de données brut en d'autres formes plus compréhensibles.
<!-- comment -->
Une catégorie très efficace de méthodes d'analyse des données est appelée "visualisation des données", qui cherche à fournir des réponses aux questions en convertissant un ensemble de données en une image informative.
<!-- comment -->
Le terme "visualisation des données" fait référence à la fois à l'image elle-même (également connue sous le nom de tracé, graphique, figure, diagramme, graphique ou visualisation des données) et au processus de création de l'image.

<!-- paragraph -->

Il existe de nombreuses façons différentes d'effectuer une analyse de données, et des ensembles de données de tailles différentes doivent être analysés à l'aide de techniques différentes.
<!-- comment -->
Il existe de nombreuses façons de caractériser la taille des ensembles de données, et chaque auteur utilise une définition légèrement différente.
<!-- comment -->
Dans ce manuel, nous utiliserons une classification des ensembles de données en trois tailles :
petit, moyen et grand.
<!-- comment -->
Nous commençons par discuter des petits ensembles de données, pour lesquels la visualisation des données n'est pas nécessaire.

<!-- paragraph -->

### Analyse de petits ensembles de données sans visualisation {#small-data}

<!-- paragraph -->

Dans cette section, nous aborderons les "petites données", qui sont suffisamment petites pour que l'analyse des données puisse être effectuée en examinant simplement l'ensemble du tableau de données.
<!-- comment -->
Pour les petits ensembles de données, il n'est pas nécessaire d'utiliser la visualisation des données.
<!-- comment -->
Au lieu de cela, les données peuvent simplement être présentées pour une visualisation des données dans un tableau.

<!-- paragraph -->

Prenons un exemple concret [la célèbre expérience de dégustation de thé proposée par Ronald Fisher](https://en.wikipedia.org/wiki/Lady_tasting_tea).
<!-- comment -->
Une dame a affirmé qu'elle pouvait sentir la différence lorsque du lait est ajouté dans la tasse de thé avant ou après le thé.
<!-- comment -->
Fisher pose la question suivante : la dame peut-elle vraiment sentir la différence entre les deux types de thé ?

<!-- paragraph -->

Pour répondre à cette question, Fisher a préparé quatre tasses de thé avec du lait ajouté après, et quatre tasses de thé avec du lait ajouté avant.
<!-- comment -->
Fisher a ensuite placé les tasses dans un ordre aléatoire, a fait goûter les huit tasses de thé à la dame et lui a demandé d'identifier les quatre tasses dans lesquelles du lait avait été ajouté après le thé.
<!-- comment -->
Selon le`help(fisher.test)` dans R, la dame a correctement identifié trois des quatre tasses dans lesquelles du lait a été ajouté après le thé.
<!-- comment -->
Fisher a ensuite noté les données suivantes : le nombre total de tasses (8), le nombre total de tasses dans lesquelles du lait a été ajouté (4) et le nombre total de tasses que la dame a correctement identifiées (3).
<!-- comment -->
Dans R, cet ensemble de données peut être visualisé en imprimant un tableau de contingence des données de comptage :

<!-- paragraph -->

```{r, echo=FALSE}
TeaTasting <- matrix(c(
  3, 1, 1, 3),
  nrow = 2,
  dimnames = list(
    Guess = c("Lait", "Thé"),
    Truth = c("Lait", "Thé")))
print(TeaTasting)
```

<!-- paragraph -->

Dans ce cas, l'ensemble de données est suffisamment petit pour que l'on puisse répondre à la question de Fisher en examinant simplement le tableau de données lui-même.
<!-- comment -->
Si la dame avait pu identifier correctement les quatre coupes, elle aurait fait une démonstration très convaincante de ses capacités.
<!-- comment -->
Cependant, elle n'a apparemment pu identifier correctement que trois des quatre coupes, ce qui est moins convaincant.

<!-- paragraph -->

Le sujet principal de ce manuel est la visualisation des données, ce qui n'est pas nécessaire pour des ensembles de données aussi petits.
<!-- comment -->
Nous nous concentrerons plutôt sur les ensembles de données trop volumineux pour être analysés par une visualisation manuelle du tableau de données.

<!-- paragraph -->

### Analyse de données moyennes avec des visualisations de données statiques {#medium-data}

<!-- paragraph -->

Pour les ensembles de données de taille moyenne, la simple inspection du tableau de données ne suffit plus pour répondre aux questions posées lors de l'analyse des données.
<!-- comment -->
Les données de taille moyenne sont suffisamment volumineuses pour que nous ayons besoin d'utiliser la visualisation pour comprendre les données.

<!-- paragraph -->

Prenons par exemple les données suivantes sur les concentrations de dioxyde de carbone (CO2) dans l'atmosphère, enregistrées mensuellement entre 1959 et 1997.

<!-- paragraph -->

```{r, echo=FALSE}
year.int <- as.integer(floor(time(co2)))
month.int <- as.integer(time(co2) %% 1 * 12 + 1)
year.month.chr <- sprintf("%d-%02d-15", year.int, month.int)
year.month.POSIXct <- as.POSIXct(strptime(year.month.chr, "%Y-%m-%d"))
hidden <- Sys.setlocale("LC_TIME", "C")
month.str <- strftime(year.month.POSIXct, "%B")
month <- factor(month.str, month.str[1:12])
library(data.table)
co2.details <- data.table(
  year.int,
  month.int,
  month,
  year.month.POSIXct,
  ppm=as.numeric(co2))
co2.details
```

<!-- paragraph -->

L'impression de ces données sur la ligne de commande R montre qu'il y a 468 lignes/observations au total.
<!-- comment -->
Ce n'est pas un nombre énorme d'observations, mais il est déjà suffisamment important pour qu'il ne soit pas facile de répondre aux questions par une simple visualisation du tableau de données.
<!-- comment -->
Au lieu de cela, nous allons créer une visualisation des données statique :

<!-- paragraph -->

```{r, echo=FALSE}
library(animint2)
extremes <- co2.details[month.int %in% c(5, 10),]
ggplot()+
  geom_line(aes(
    year.month.POSIXct, ppm),
    data=co2.details)+
  geom_point(aes(
    year.month.POSIXct, ppm, color=month),
    data=extremes)+
  xlab("Moment de la mesure")+
  ylab("CO₂ atmosphérique (ppm)")
```

<!-- paragraph -->

La visualisation des données statiques montre que les concentrations de CO2 ont augmenté au cours de la seconde moitié du XXe siècle.
<!-- comment -->
Cette visualisation des données s'appelle une [courbe de Keeling](https://en.wikipedia.org/wiki/Keeling_Curve).
<!-- comment -->
Il porte le nom de Charles David Keeling, le scientifique pionnier qui a recueilli les premières données régulières et fréquentes sur le CO2 atmosphérique.
<!-- comment -->
La tendance générale à l'augmentation peut être expliquée par le processus chimique de la combustion, qui convertit l'oxygène en CO2.
<!-- comment -->
Keeling a noté que "le taux d'augmentation observé est proche de celui que l'on peut attendre de la combustion de combustibles fossiles" [@keeling1960concentration] .

<!-- paragraph -->

La visualisation des données révèle également l'intéressante tendance saisonnière qui atteint un maximum local chaque mois de mai et un minimum local chaque mois d'octobre.
<!-- comment -->
Cette tendance saisonnière peut être expliquée en considérant les forêts de l'hémisphère nord.
<!-- comment -->
Les feuilles des arbres de ces forêts réalisent la photosynthèse, c'est-à-dire la transformation chimique du CO2 en oxygène.
<!-- comment -->
Pendant les mois d'hiver, les arbres n'ont pas de feuilles et le CO2 s'accumule dans l'atmosphère jusqu'à ce qu'il atteigne son maximum en mai de chaque année.
<!-- comment -->
Lorsque les feuilles reviennent chaque année, elles réalisent la photosynthèse tout au long du printemps et de l'été, ce qui fait baisser la concentration de CO2 dans l'atmosphère jusqu'à ce qu'elle atteigne son minimum annuel en octobre.

<!-- paragraph -->

Nous disons que cette visualisation des données est "statique" ou "non interactive" parce que le lecteur peut la visualiser mais ne peut pas modifier ce qui est affiché.
<!-- comment -->
Cela convient parfaitement aux ensembles de données de taille moyenne, dans lesquels nous pouvons voir tous les détails de l'ensemble de données.
<!-- comment -->
Cependant, comme nous le verrons dans la section suivante, la visualisation statique des données n'est pas suffisante pour montrer tous les détails des grands ensembles de données.

<!-- paragraph -->

### Analyse de données volumineuses avec visualisation des données interactive {#large-data}

<!-- paragraph -->

Certains ensembles de données sont si volumineux qu'il n'est pas possible ou souhaitable de tracer toutes les données à la fois dans une visualisation statique des données.
<!-- comment -->
Pour ces ensembles de "grandes données", les approches traditionnelles de l'analyse des données consistent à résumer les données, puis à visualiser le résumé.
<!-- comment -->
Cependant, le résumé peut être trompeur, car il ne montre pas tous les détails des données originales.
<!-- comment -->
Dans de telles situations, la "visualisation des données interactive" devient utile.

<!-- paragraph -->

Examinons tout d'abord une forme légèrement plus compliquée de la visualisation des données de la courbe de Keeling.

<!-- paragraph -->

```{r, echo=FALSE}
TimeSeries <- ggplot()+
  geom_line(aes(
    year.month.POSIXct, ppm),
    size=1,
    data=co2.details)+
  geom_point(aes(
    year.month.POSIXct, ppm, color=month),
    data=co2.details)+
  xlab("Moment de la mesure")+
  ylab("CO₂ atmosphérique (ppm)")
TimeSeries
```

<!-- paragraph -->

Le graphique ci-dessus présente des points colorés pour chaque mois de l'année, plutôt que pour les seuls mois de mai et septembre, les minima locaux annuels que nous voulions mettre en évidence.
<!-- comment -->
Ce graphique statique n'est pas aussi instructif que le précédent, car il ne met pas l'accent sur les minima locaux.
<!-- comment -->
Il s'agit d'un exemple où il n'est pas souhaitable de tracer toutes les données en même temps.
<!-- comment -->
Nous pouvons résoudre ce problème en utilisant le graphique interactif suivant.

<!-- paragraph -->

```{r ch01-viz-Keeling, echo=FALSE}
animint(
  TimeSeries,
  first=list(month=c("May", "October")))
```

<!-- paragraph -->

Dans le graphique ci-dessus, l'accentuation par défaut est mai et octobre, mais l'utilisateur peut cliquer sur la légende pour mettre à jour l'accentuation.
<!-- comment -->
Cet exemple simple illustre l'idée principale de la visualisation interactive des données à l'aide d'animint.
<!-- comment -->
De nombreux choix doivent être faits pour montrer les détails des ensembles de données volumineuses.
<!-- comment -->
Par exemple, le choix des mois à mettre en valeur dans le graphique ci-dessus.
<!-- comment -->
Plutôt que de fixer de tels choix dans un graphique statique, l'objectif de la visualisation des données interactive est de permettre au lecteur de voir à quoi ressemble le graphique lorsque des choix différents sont faits.
<!-- comment -->
Dans l'exemple ci-dessus, nous avons utilisé une légende interactive qui permet à l'utilisateur de sélectionner différents mois et de voir à quoi ressemble le graphique après avoir modifié la sélection.

<!-- paragraph -->

L'exemple ci-dessus fournit également un bon exemple de `clickSelects` et `showSelected` les deux mots-clés introduits par animint pour permettre l'interaction.
<!-- comment -->
Sans entrer dans les détails, le graphique ci-dessus utilise les éléments suivants `clickSelects=month` pour la légende interactive, ce qui signifie qu'un clic sur la légende devrait modifier les mois sélectionnés.
<!-- comment -->
En outre, nous avons utilisé `showSelected=month` pour les points, ce qui signifie que nous ne devons tracer que l'ensemble de points qui correspond aux mois actuellement sélectionnés.
<!-- comment -->
Dans les chapitres 3 et 4, nous expliquerons comment concevoir des visualisations de données en écrivant du code R à l'aide de ces deux nouveaux mots-clés.

<!-- paragraph -->

## Résumé du chapitre et exercices {#exercises}

<!-- paragraph -->

Ce chapitre a expliqué quelques notions de base sur les données et a donné des définitions des différentes tailles de données : petites, moyennes et grandes.

<!-- paragraph -->

- Sur la base des définitions présentées dans ce chapitre, quelle est la différence entre les petites et les moyennes données ?
<!-- comment -->
- Quelle est la différence entre les données moyennes et les données importantes ?

<!-- paragraph -->

Suivant, [Chapitre 2](ch02) explique comment la grammaire graphique peut être utilisée pour créer des visualisations des données.

<!-- paragraph -->


